# æ€æºç­†è¨˜ Halo ç™¼ä½ˆæ’ä»¶

[ç®€ä½“ä¸­æ–‡](https://github.com/Sundaydream/siyuan-plugin-halo-publisher/blob/main/README.md) | [English](https://github.com/Sundaydream/siyuan-plugin-halo-publisher/blob/main/README_en_US.md)

<div align="center">
  <img src="https://cdn.jsdelivr.net/gh/Sundaydream/siyuan-plugin-halo-publisher@main/icon.png" alt="Logo" width="120" height="120">
  <h3>é€£æ¥æ€æºç­†è¨˜èˆ‡ Halo éƒ¨è½æ ¼çš„æ©‹æ¨‘ï¼Œç‚ºæ‚¨æä¾›ç„¡ç¸«çš„å¯«ä½œç™¼ä½ˆé«”é©—</h3>
</div>


## âš ï¸ é‡è¦ç”¨å‰é ˆçŸ¥

**æœ¬æ’ä»¶ç”± AI è¼”åŠ©é–‹ç™¼ï¼Œé–‹æºå…è²»ï¼Œä½†ä¸å°åŠŸèƒ½å¯ç”¨æ€§åšå‡ºä»»ä½•ä¿è­‰ï¼Œä½¿ç”¨å‰åŠä½¿ç”¨ä¸­è«‹è‡ªè¡Œå‚™ä»½æ•¸æ“šã€è‡ªè¡Œæ‰¿æ“”é¢¨éšªï¼Œä½œè€…å°æœ¬æ’ä»¶é€ æˆçš„ä»»ä½•å¾Œæœä¸è² ä»»ä½•è²¬ä»»ï¼**

å¦‚æœ‰ä»»ä½•ä½¿ç”¨ä¸­é‡åˆ°çš„å•é¡Œï¼Œæ­¡è¿åé¥‹ï¼Œä½†æ˜¯ä¸ä¿è­‰ä¿®å¾©æ™‚æ•ˆï¼ˆè½èªªæ‰“è³å’Œå» GitHub é» Star èƒ½åŠ å¿«ä¿® Bug å“¦ğŸ˜˜ï¼‰ã€‚

æœ¬æ’ä»¶ä¸å‡ºæ„å¤–çš„è©±åœ¨æœªä¾†ä¸æœƒæ”¯æŒé™¤ Halo å¤–çš„ä»»ä½•å…¶ä»–éƒ¨è½æ ¼å¹³å°ï¼Œæœ‰ç›¸é—œéœ€æ±‚è€…è«‹é¸ç”¨å…¶ä»–æ’ä»¶ã€‚

---

## ğŸ“– ç°¡ä»‹

**Halo Publisher** æ˜¯ä¸€æ¬¾å°ˆç‚ºæ€æºç­†è¨˜æ‰“é€ çš„ç™¼ä½ˆæ’ä»¶ï¼Œæ·±åº¦é©é… Halo 2.0+ éƒ¨è½æ ¼å¹³å°ã€‚å®ƒä¸åƒ…æ˜¯ä¸€å€‹ç°¡å–®çš„ç™¼ä½ˆå·¥å…·ï¼Œæ›´æ˜¯ä¸€å€‹å®Œæ•´çš„æ–‡ç« ç®¡ç†è§£æ±ºæ–¹æ¡ˆã€‚é€šéæœ¬æ’ä»¶ï¼Œæ‚¨å¯ä»¥ç›´æ¥åœ¨æ€æºç­†è¨˜ä¸­å®Œæˆæ–‡ç« çš„æ’°å¯«ã€ç™¼ä½ˆã€æ›´æ–°ä»¥åŠåˆ†é¡ç®¡ç†ï¼Œç„¡éœ€åœ¨å…©å€‹å¹³å°é–“åå¾©åˆ‡æ›ï¼Œè®“å‰µä½œå›æ­¸ç´”ç²¹ã€‚

### æ ¸å¿ƒäº®é»

- **ç°¡ç´„ä»‹é¢**ï¼šæ¡ç”¨æ¸…æ™°æ˜å¿«çš„ä»‹é¢è¨­è¨ˆï¼Œæ“ä½œæµæš¢è‡ªç„¶ã€‚
- **è±å¯Œåƒæ•¸**ï¼šæ”¯æŒæ–‡ç« å…§å®¹ã€æ¨™é¡Œã€å…ƒæ•¸æ“šï¼ˆSlugã€æ‘˜è¦ï¼‰ç­‰çš„è¨­ç½®ã€‚
- **åœ–ç‰‡è™•ç†**ï¼š
  - **è‡ªå‹•åœ–åºŠ**ï¼šè‡ªå‹•è§£æä¸¦ä¸Šå‚³ç­†è¨˜å…§çš„æœ¬åœ°åœ–ç‰‡åˆ° Halo é™„ä»¶åº«ã€‚
  - **é›²ç«¯å…¼å®¹**ï¼šæ”¯æŒ Halo çš„ GitHub OSS ç­‰ç¬¬ä¸‰æ–¹å­˜å„²æ’ä»¶**ï¼ˆéƒ¨åˆ† Halo æ’ä»¶æœƒå°è‡´ç„¡æ³•ä¸Šå‚³åœ–ç‰‡åˆ° Halo æœ¬åœ°å­˜å„²åº«ï¼Œé€™ä¸æ˜¯æœ¬æ’ä»¶çš„ bug ï¼Œè«‹å»å°æ‡‰çš„ Halo æ’ä»¶è™•åé¥‹ï¼‰**ã€‚
  - **æ™ºèƒ½å»é‡**ï¼šåœ–ç‰‡å»é‡æ©Ÿåˆ¶ï¼Œé¿å…é‡è¤‡ä¸Šå‚³ã€‚
- **éš±ç§å®‰å…¨**ï¼šæ‰€æœ‰è«‹æ±‚ç›´æ¥é€šéæ€æºå…§æ ¸ä»£ç†ï¼Œ**é›¶ç¬¬ä¸‰æ–¹ä¸­è½‰**ï¼ŒToken èˆ‡é…ç½®åƒ…å­˜å„²æ–¼æœ¬åœ°ã€‚
- **æ•¸æ“šè‡ªç”±**ï¼šæä¾›å®Œæ•´çš„é…ç½®èˆ‡æ•¸æ“šå°å…¥/å°å‡ºåŠŸèƒ½ï¼Œæ–¹ä¾¿è·¨è¨­å‚™é·ç§»æˆ–å‚™ä»½ã€‚
- **å¤šèªè¨€æ”¯æŒ**ï¼šæ”¯æŒç°¡é«”ä¸­æ–‡ã€ç¹é«”ä¸­æ–‡ã€è‹±æ–‡ã€‚

---

## ç”¨æˆ¶æŒ‡å—

### 1. å®‰è£èˆ‡é…ç½®

#### 1.1 å®‰è£æ’ä»¶

åœ¨æ€æºç­†è¨˜çš„é›†å¸‚ä¸­ç›´æ¥æœç´¢å®‰è£ï¼Œæˆ–ï¼š

1. ä¸‹è¼‰æœ€æ–°çš„ç™¼ä½ˆåŒ… `package.zip`ã€‚
2. æ‰“é–‹æ€æºç­†è¨˜ï¼Œé€²å…¥ **è¨­ç½®** -> **é—œæ–¼**ï¼ŒæŸ¥çœ‹ **å·¥ä½œç©ºé–“è·¯å¾‘**ã€‚
3. é€²å…¥å·¥ä½œç©ºé–“ç›®éŒ„ä¸‹çš„ `data/plugins/`ï¼Œæ–°å»ºæ–‡ä»¶å¤¾ `siyuan-plugin-halo-publisher`ã€‚
4. å°‡è§£å£“å¾Œçš„æ‰€æœ‰æ–‡ä»¶æ”¾å…¥è©²æ–‡ä»¶å¤¾ã€‚
5. é‡å•Ÿæ€æºç­†è¨˜ï¼Œåœ¨é ‚æ¬„å•Ÿç”¨æ’ä»¶ã€‚

#### 1.2 å»ºç«‹é€£æ¥

![image-20260116000215441](https://cdn.jsdelivr.net/gh/Sundaydream/siyuan-plugin-halo-publisher@main/README_zh_TW.assets/image-20260116000215441.png)

åˆæ¬¡ä½¿ç”¨éœ€é…ç½® Halo ç«™é»ä¿¡æ¯ï¼š
1. é»æ“Šé ‚æ¬„ Halo åœ–æ¨™ï¼Œé€²å…¥ **é€šç”¨è¨­ç½®** æ¨™ç±¤é ã€‚
2. **ç«™é»åœ°å€**ï¼šè¼¸å…¥æ‚¨çš„ Halo 2.x éƒ¨è½æ ¼åœ°å€ï¼ˆä¾‹å¦‚ `https://blog.example.com`ï¼‰ã€‚
3. **æˆæ¬Šèªè­‰**ï¼š
   - **è‡ªå‹•æ¨¡å¼ï¼ˆæ¨è–¦ï¼‰**ï¼šé»æ“Šã€ŒğŸ” è‡ªå‹•ç™»éŒ„ç²å– Cookieã€ï¼Œåœ¨å½ˆå‡ºçš„å…§åµŒçª—å£ä¸­ç™»éŒ„ Halo å¾Œå°ã€‚æ’ä»¶æœƒè‡ªå‹•æ•ç²èªè­‰ä¿¡æ¯ã€‚
   - **æ‰‹å‹•æ¨¡å¼**ï¼š
     1. åœ¨ç€è¦½å™¨ç™»éŒ„ Halo å¾Œå°ã€‚
     2. æŒ‰ `F12` æ‰“é–‹é–‹ç™¼è€…å·¥å…· -> ç¶²çµ¡(Network)ã€‚
     3. åˆ·æ–°é é¢ï¼Œæ‰¾åˆ°ä»»æ„ API è«‹æ±‚ï¼Œè¤‡è£½è«‹æ±‚é ­ä¸­çš„ `Cookie` å­—æ®µã€‚
     4. å°‡å…¶ç²˜è²¼åˆ°æ’ä»¶çš„ã€ŒCookieã€è¼¸å…¥æ¡†ä¸­ã€‚
4. é»æ“Š **ä¿å­˜ä¸¦é©—è­‰**ï¼Œè‹¥é¡¯ç¤ºã€Œâœ… æˆæ¬Šæœ‰æ•ˆã€ï¼Œå³è¡¨ç¤ºé€£æ¥æˆåŠŸã€‚

### 2. æ–‡ç« ç™¼ä½ˆæµç¨‹

![image-20260116000251203](https://cdn.jsdelivr.net/gh/Sundaydream/siyuan-plugin-halo-publisher@main/README_zh_TW.assets/image-20260116000251203.png)

#### 2.1 æº–å‚™æ–‡ç« 
åœ¨æ€æºç­†è¨˜ä¸­å®Œæˆæ–‡ç« æ’°å¯«ã€‚

#### 2.2 ç™¼ä½ˆè¨­ç½®
é»æ“Šæ’ä»¶åœ–æ¨™åˆ‡æ›è‡³ **æ–‡ç« ç™¼ä½ˆ** æ¨™ç±¤é ï¼Œé»æ“Šç²å–ç•¶å‰ç­†è¨˜ï¼š
- **æ–‡ç« æ¨™é¡Œ**ï¼šè‡ªå‹•è®€å–ç­†è¨˜æ¨™é¡Œï¼Œæ”¯æŒæ‰‹å‹•ä¿®æ”¹ã€‚
- **åˆ¥å (Slug)**ï¼šæ–‡ç« çš„ URL æ¨™è­˜ã€‚æ”¯æŒè‡ªå‹•ç”Ÿæˆã€‚
- **åˆ†é¡èˆ‡æ¨™ç±¤**ï¼š
  - ä¸‹æ‹‰é¸æ“‡ Halo ä¸­å·²æœ‰çš„åˆ†é¡/æ¨™ç±¤ã€‚
  - æˆ–è¼¸å…¥ä¸¦å‰µå»ºæ–°åç¨±ã€‚
- **ç™¼ä½ˆè¨­ç½®**ï¼šå¯è¨­ç½®æ˜¯å¦å…è¨±è©•è«–ã€å¯è¦‹æ€§ç­‰ã€‚

#### 2.3 åŸ·è¡Œç™¼ä½ˆ
é»æ“Š **ç™¼ä½ˆåˆ° Halo** æŒ‰éˆ•ã€‚
- **åœ–ç‰‡è™•ç†**ï¼šæ’ä»¶æœƒè‡ªå‹•æƒææ–‡å…§åœ–ç‰‡ -> ä¸Šå‚³è‡³ Halo -> ç²å– URL -> æ›¿æ›æ–‡å…§éˆæ¥ã€‚
- **å°é¢åŒæ­¥**ï¼šå¦‚æœæ‚¨åœ¨æ€æºç­†è¨˜ä¸­è¨­ç½®äº†å°é¢ï¼Œå®ƒå°‡è¢«è‡ªå‹•è¨­ç½®ç‚º Halo æ–‡ç« å°é¢ã€‚

### 3. æ–‡ç« ç®¡ç†

åœ¨ **æ–‡ç« ç®¡ç†** æ¨™ç±¤é ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å·²å»ºç«‹é—œè¯çš„æ–‡ç« ï¼š
- **â™»ï¸ æ›´æ–°**ï¼šæœ¬åœ°ä¿®æ”¹ç­†è¨˜å¾Œï¼Œé»æ“Šæ›´æ–°å¯å°‡è®Šå‹•åŒæ­¥è‡³ Haloã€‚
- **ğŸ”— æŸ¥çœ‹**ï¼šç›´æ¥æ‰“é–‹ç€è¦½å™¨è¨ªå•éƒ¨è½æ ¼æ–‡ç« ã€‚
- **ğŸ—‘ï¸ åˆªé™¤**

### 4. æ•¸æ“šå‚™ä»½èˆ‡é·ç§»

ç‚ºé˜²æ­¢æ•¸æ“šä¸Ÿå¤±æˆ–æ–¹ä¾¿å¤šè¨­å‚™ä½¿ç”¨ï¼Œæ’ä»¶æä¾›äº†å®Œå–„çš„æ•¸æ“šç®¡ç†åŠŸèƒ½ï¼ˆä½æ–¼ **é€šç”¨è¨­ç½®** åº•éƒ¨ï¼‰ï¼š

- **å°å‡ºæ•¸æ“š**ï¼šç”ŸæˆåŒ…å«æ‰€æœ‰é…ç½®ã€ç™¼ä½ˆè¨˜éŒ„ï¼ˆSiyuan ID â†” Halo ID æ˜ å°„ï¼‰å’Œåœ–ç‰‡ç·©å­˜çš„ JSON å‚™ä»½æ–‡ä»¶ã€‚
- **å°å…¥æ•¸æ“š**ï¼šæ¢å¾©ä¹‹å‰çš„å‚™ä»½ï¼ˆæ³¨æ„ï¼šå°å…¥æ“ä½œæœƒè¦†è“‹ç•¶å‰çš„é…ç½®ï¼Œä¸”ç¶²ç«™ URL å’Œ Cookie ä¸æœƒè¢«å°å…¥ï¼Œéœ€è¦é‡æ–°ç™»éŒ„ï¼‰ã€‚
- **æ¸…é™¤æ•¸æ“š**ï¼šå¾¹åº•é‡ç½®æ’ä»¶ï¼Œæ¸…é™¤æ‰€æœ‰æœ¬åœ°å­˜å„²çš„é…ç½®å’Œç·©å­˜ã€‚

---

## ğŸ› ï¸ é–‹ç™¼è€…æŒ‡å—

æœ¬æŒ‡å—é¢å‘å¸Œæœ›å°æ’ä»¶é€²è¡ŒäºŒæ¬¡é–‹ç™¼æˆ–å®šåˆ¶çš„é«˜ç´šç”¨æˆ¶ã€‚

### æŠ€è¡“æ¶æ§‹

é …ç›®åŸºæ–¼ **Vue 3 + TypeScript + Vite** æ§‹å»ºï¼Œæ¡ç”¨åˆ†å±¤æ¶æ§‹è¨­è¨ˆï¼Œç¢ºä¿äº†ä»£ç¢¼çš„å¯ç¶­è­·æ€§èˆ‡æ“´å±•æ€§ã€‚

| æ¨¡å¡Š | è·¯å¾‘ | è·è²¬èªªæ˜ |
|------|------|----------|
| **UI Presentation** | `src/App.vue` | åŸºæ–¼ Composition API çš„éŸ¿æ‡‰å¼ä»‹é¢ï¼Œè² è²¬ç”¨æˆ¶äº¤äº’èˆ‡ç‹€æ…‹å±•ç¤ºã€‚ |
| **Adaptor Layer** | `src/adaptors/` | æ ¸å¿ƒé©é…å±¤ã€‚`HalowebWebAdaptor` å°è£äº† Halo 2.0 Open API çš„æ‰€æœ‰èª¿ç”¨ç´°ç¯€ï¼Œå¯¦ç¾äº†æ¥­å‹™é‚è¼¯èˆ‡åº•å±¤ API çš„è§£è€¦ã€‚ |
| **Core API** | `src/api/` | åŸºç¤èƒ½åŠ›å±¤ã€‚`BaseExtendApi` è™•ç†åº•å±¤ HTTP è«‹æ±‚ä»£ç†ã€åœ–ç‰‡éšŠåˆ—ä¸Šå‚³åŠéŒ¯èª¤é‡è©¦æ©Ÿåˆ¶ã€‚ |
| **State Management** | `src/utils/*Store.ts` | æœ¬åœ°æŒä¹…åŒ–å­˜å„²ã€‚åŒ…å«ç™¼ä½ˆè¨˜éŒ„ (`PublishStore`) å’Œåœ–ç‰‡ç·©å­˜ (`ImageCacheStore`) çš„ç®¡ç†ï¼Œå¯¦ç¾äº†æ•¸æ“šåœ¨æ€æºç«¯çš„è½åœ°ã€‚ |

### é–‹ç™¼ç’°å¢ƒæ­å»º

**å‰ç½®è¦æ±‚**ï¼š
- Node.js 16+
- pnpm

**æ­¥é©Ÿ**ï¼š
1. å…‹éš†å€‰åº«ï¼š
   ```bash
   git clone https://github.com/YourRepo/siyuan-plugin-halo-publisher.git
   ```
2. å®‰è£ä¾è³´ï¼š
   ```bash
   pnpm install
   ```
3. å•Ÿå‹•é–‹ç™¼æœå‹™å™¨ï¼š
   ```bash
   pnpm run dev
   ```
   *æ³¨ï¼šé–‹ç™¼æ¨¡å¼ä¸‹éœ€æ‰‹å‹•å°‡ `dist` ç›®éŒ„éˆæ¥åˆ°æ€æºæ’ä»¶ç›®éŒ„ã€‚*

4. ç”Ÿç”¢æ§‹å»ºï¼š
   ```bash
   pnpm run build
   ```

### èª¿è©¦å»ºè­°
- **UI èª¿è©¦**ï¼šæ’ä»¶ UI æœ¬è³ªæ˜¯ WebViewï¼Œå¯åœ¨æ€æºç­†è¨˜ä¸­é€šéå³éµ -> "Inspect" æ‰“é–‹é–‹ç™¼è€…å·¥å…·èª¿è©¦ Vue çµ„ä»¶ã€‚
- **API èª¿è©¦**ï¼šæŸ¥çœ‹ Console é¢æ¿çš„ `[HaloPublisher]` å‰ç¶´æ—¥èªŒï¼Œå¯è¿½è¹¤è©³ç´°çš„è«‹æ±‚åƒæ•¸èˆ‡éŸ¿æ‡‰ã€‚

---

## ğŸ“„ è¨±å¯è­‰

æœ¬é …ç›®æ¡ç”¨ [MIT è¨±å¯è­‰](./LICENSE) é–‹æºã€‚æ­¡è¿æäº¤ Pull Request æˆ– Issue åƒèˆ‡è²¢ç»ã€‚
