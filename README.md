# æ€æºç¬”è®° Halo å‘å¸ƒæ’ä»¶

[English](https://github.com/Sundaydream/siyuan-plugin-halo-publisher/blob/main/README_en_US.md) | [ç¹é«”ä¸­æ–‡](https://github.com/Sundaydream/siyuan-plugin-halo-publisher/blob/main/README_zh_CHT.md)

<div align="center">
  <img src="https://cdn.jsdelivr.net/gh/Sundaydream/siyuan-plugin-halo-publisher@main/icon.png" alt="Logo" width="120" height="120">
  <h3>è¿æ¥æ€æºç¬”è®°ä¸ Halo åšå®¢çš„æ¡¥æ¢ï¼Œä¸ºæ‚¨æä¾›æ— ç¼çš„å†™ä½œå‘å¸ƒä½“éªŒ</h3>
</div>


## âš ï¸ é‡è¦ç”¨å‰é¡»çŸ¥

**æœ¬æ’ä»¶ç”± AI è¾…åŠ©å¼€å‘ï¼Œå¼€æºå…è´¹ï¼Œä½†ä¸å¯¹åŠŸèƒ½å¯ç”¨æ€§åšå‡ºä»»ä½•ä¿è¯ï¼Œä½¿ç”¨å‰åŠä½¿ç”¨ä¸­è¯·è‡ªè¡Œå¤‡ä»½æ•°æ®ã€è‡ªè¡Œæ‰¿æ‹…é£é™©ï¼Œä½œè€…å¯¹æœ¬æ’ä»¶é€ æˆçš„ä»»ä½•åæœä¸è´Ÿä»»ä½•è´£ä»»ï¼**

å¦‚æœ‰ä»»ä½•ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œæ¬¢è¿åé¦ˆï¼Œä½†æ˜¯ä¸ä¿è¯ä¿®å¤æ—¶æ•ˆï¼ˆå¬è¯´æ‰“èµå’Œå» GitHub ç‚¹ Star èƒ½åŠ å¿«ä¿® Bug å“¦ğŸ˜˜ï¼‰ã€‚

æœ¬æ’ä»¶ä¸å‡ºæ„å¤–çš„è¯åœ¨æœªæ¥ä¸ä¼šæ”¯æŒé™¤ Halo å¤–çš„ä»»ä½•å…¶ä»–åšå®¢å¹³å°ï¼Œæœ‰ç›¸å…³éœ€æ±‚è€…è¯·é€‰ç”¨å…¶ä»–æ’ä»¶ã€‚

---

## ğŸ“– ç®€ä»‹

**Halo Publisher** æ˜¯ä¸€æ¬¾ä¸“ä¸ºæ€æºç¬”è®°æ‰“é€ çš„å‘å¸ƒæ’ä»¶ï¼Œæ·±åº¦é€‚é… Halo 2.0+ åšå®¢å¹³å°ã€‚å®ƒä¸ä»…æ˜¯ä¸€ä¸ªç®€å•çš„å‘å¸ƒå·¥å…·ï¼Œæ›´æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–‡ç« ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡æœ¬æ’ä»¶ï¼Œæ‚¨å¯ä»¥ç›´æ¥åœ¨æ€æºç¬”è®°ä¸­å®Œæˆæ–‡ç« çš„æ’°å†™ã€å‘å¸ƒã€æ›´æ–°ä»¥åŠåˆ†ç±»ç®¡ç†ï¼Œæ— éœ€åœ¨ä¸¤ä¸ªå¹³å°é—´åå¤åˆ‡æ¢ï¼Œè®©åˆ›ä½œå›å½’çº¯ç²¹ã€‚

### æ ¸å¿ƒäº®ç‚¹

- **ç®€çº¦ç•Œé¢**ï¼šé‡‡ç”¨æ¸…æ™°æ˜å¿«çš„ç•Œé¢è®¾è®¡ï¼Œæ“ä½œæµç•…è‡ªç„¶ã€‚
- **ä¸°å¯Œå‚æ•°**ï¼šæ”¯æŒæ–‡ç« å†…å®¹ã€æ ‡é¢˜ã€å…ƒæ•°æ®ï¼ˆSlugã€æ‘˜è¦ï¼‰ç­‰çš„è®¾ç½®ã€‚
- **å›¾ç‰‡å¤„ç†**ï¼š
  - **è‡ªåŠ¨å›¾åºŠ**ï¼šè‡ªåŠ¨è§£æå¹¶ä¸Šä¼ ç¬”è®°å†…çš„æœ¬åœ°å›¾ç‰‡åˆ° Halo é™„ä»¶åº“ã€‚
  - **äº‘ç«¯å…¼å®¹**ï¼šæ”¯æŒ Halo çš„ GitHub OSS ç­‰ç¬¬ä¸‰æ–¹å­˜å‚¨æ’ä»¶ **ï¼ˆéƒ¨åˆ† Halo æ’ä»¶ä¼šå¯¼è‡´æ— æ³•ä¸Šä¼ å›¾ç‰‡åˆ° Halo æœ¬åœ°å­˜å‚¨åº“ï¼Œè¿™ä¸æ˜¯æœ¬æ’ä»¶çš„ bug ï¼Œè¯·å»å¯¹åº”çš„ Halo æ’ä»¶å¤„åé¦ˆï¼‰**ã€‚
  - **æ™ºèƒ½å»é‡**ï¼šå›¾ç‰‡å»é‡æœºåˆ¶ï¼Œé¿å…é‡å¤ä¸Šä¼ ã€‚
- **éšç§å®‰å…¨**ï¼šæ‰€æœ‰è¯·æ±‚ç›´æ¥é€šè¿‡æ€æºå†…æ ¸ä»£ç†ï¼Œ**é›¶ç¬¬ä¸‰æ–¹ä¸­è½¬**ï¼ŒToken ä¸é…ç½®ä»…å­˜å‚¨äºæœ¬åœ°ã€‚
- **æ•°æ®è‡ªç”±**ï¼šæä¾›å®Œæ•´çš„é…ç½®ä¸æ•°æ®å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½ï¼Œæ–¹ä¾¿è·¨è®¾å¤‡è¿ç§»æˆ–å¤‡ä»½ã€‚
- **å¤šè¯­è¨€æ”¯æŒ**ï¼šæ”¯æŒç®€ä½“ä¸­æ–‡ã€ç¹ä½“ä¸­æ–‡ã€è‹±æ–‡ã€‚

---

## ç”¨æˆ·æŒ‡å—

### 1. å®‰è£…ä¸é…ç½®

#### 1.1 å®‰è£…æ’ä»¶

åœ¨æ€æºç¬”è®°çš„é›†å¸‚ä¸­ç›´æ¥æœç´¢å®‰è£…ï¼Œæˆ–ï¼š

1. ä¸‹è½½æœ€æ–°çš„å‘å¸ƒåŒ… `package.zip`ã€‚
2. æ‰“å¼€æ€æºç¬”è®°ï¼Œè¿›å…¥ **è®¾ç½®** -> **å…³äº**ï¼ŒæŸ¥çœ‹ **å·¥ä½œç©ºé—´è·¯å¾„**ã€‚
3. è¿›å…¥å·¥ä½œç©ºé—´ç›®å½•ä¸‹çš„ `data/plugins/`ï¼Œæ–°å»ºæ–‡ä»¶å¤¹ `siyuan-plugin-halo-publisher`ã€‚
4. å°†å‹ç¼©åŒ…è§£å‹åçš„æ‰€æœ‰æ–‡ä»¶æ”¾å…¥è¯¥æ–‡ä»¶å¤¹ã€‚
5. é‡å¯æ€æºç¬”è®°ï¼Œåœ¨é¡¶æ å¯ç”¨æ’ä»¶ã€‚

#### 1.2 å»ºç«‹è¿æ¥

![image-20260115234546584](https://cdn.jsdelivr.net/gh/Sundaydream/siyuan-plugin-halo-publisher@main/README.assets/image-20260115234546584.png)

åˆæ¬¡ä½¿ç”¨éœ€é…ç½® Halo ç«™ç‚¹ä¿¡æ¯ï¼š
1. ç‚¹å‡»é¡¶æ  Halo å›¾æ ‡ï¼Œè¿›å…¥ **é€šç”¨è®¾ç½®** æ ‡ç­¾é¡µã€‚
2. **ç«™ç‚¹åœ°å€**ï¼šè¾“å…¥æ‚¨çš„ Halo 2.x åšå®¢åœ°å€ï¼ˆä¾‹å¦‚ `https://blog.example.com`ï¼‰ã€‚
3. **æˆæƒè®¤è¯**ï¼š
   - **è‡ªåŠ¨æ¨¡å¼ï¼ˆæ¨èï¼‰**ï¼šç‚¹å‡»ã€ŒğŸ” è‡ªåŠ¨ç™»å½•è·å– Cookieã€ï¼Œåœ¨å¼¹å‡ºçš„å†…åµŒçª—å£ä¸­ç™»å½• Halo åå°ã€‚æ’ä»¶ä¼šè‡ªåŠ¨æ•è·è®¤è¯ä¿¡æ¯ã€‚
   - **æ‰‹åŠ¨æ¨¡å¼**ï¼š
     1. åœ¨æµè§ˆå™¨ç™»å½• Halo åå°ã€‚
     2. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…· -> ç½‘ç»œ(Network)ã€‚
     3. åˆ·æ–°é¡µé¢ï¼Œæ‰¾åˆ°ä»»æ„ API è¯·æ±‚ï¼Œå¤åˆ¶è¯·æ±‚å¤´ä¸­çš„ `Cookie` å­—æ®µã€‚
     4. å°†å…¶ç²˜è´´åˆ°æ’ä»¶çš„ã€ŒCookieã€è¾“å…¥æ¡†ä¸­ã€‚
4. ç‚¹å‡» **ä¿å­˜å¹¶éªŒè¯**ï¼Œè‹¥æ˜¾ç¤ºâ€œâœ… æˆæƒæœ‰æ•ˆâ€ï¼Œå³è¡¨ç¤ºè¿æ¥æˆåŠŸã€‚

### 2. æ–‡ç« å‘å¸ƒæµç¨‹

![image-20260115234402942](https://cdn.jsdelivr.net/gh/Sundaydream/siyuan-plugin-halo-publisher@main/README.assets/image-20260115234402942.png)

#### 2.1 å‡†å¤‡æ–‡ç« 
åœ¨æ€æºç¬”è®°ä¸­å®Œæˆæ–‡ç« æ’°å†™ã€‚

#### 2.2 å‘å¸ƒè®¾ç½®
ç‚¹å‡»æ’ä»¶å›¾æ ‡åˆ‡æ¢è‡³ **æ–‡ç« å‘å¸ƒ** æ ‡ç­¾é¡µï¼Œç‚¹å‡»è·å–å½“å‰ç¬”è®°ï¼š
- **æ–‡ç« æ ‡é¢˜**ï¼šè‡ªåŠ¨è¯»å–ç¬”è®°æ ‡é¢˜ï¼Œæ”¯æŒæ‰‹åŠ¨ä¿®æ”¹ã€‚
- **åˆ«å (Slug)**ï¼šæ–‡ç« çš„ URL æ ‡è¯†ã€‚æ”¯æŒè‡ªåŠ¨ç”Ÿæˆã€‚
- **åˆ†ç±»ä¸æ ‡ç­¾**ï¼š
  - ä¸‹æ‹‰é€‰æ‹© Halo ä¸­å·²æœ‰çš„åˆ†ç±»/æ ‡ç­¾ã€‚
  - æˆ–è¾“å…¥å¹¶åˆ›å»ºæ–°åç§°ã€‚
- **å‘å¸ƒè®¾ç½®**ï¼šå¯è®¾ç½®æ˜¯å¦å…è®¸è¯„è®ºã€å¯è§æ€§ç­‰ã€‚

#### 2.3 æ‰§è¡Œå‘å¸ƒ
ç‚¹å‡» **å‘å¸ƒåˆ° Halo** æŒ‰é’®ã€‚
- **å›¾ç‰‡å¤„ç†**ï¼šæ’ä»¶ä¼šè‡ªåŠ¨æ‰«ææ–‡å†…å›¾ç‰‡ -> ä¸Šä¼ è‡³ Halo -> è·å– URL -> æ›¿æ¢æ–‡å†…é“¾æ¥ã€‚
- **å°é¢åŒæ­¥**ï¼šå¦‚æœæ‚¨åœ¨æ€æºç¬”è®°ä¸­è®¾ç½®äº†å°é¢ï¼Œå®ƒå°†è¢«è‡ªåŠ¨è®¾ç½®ä¸º Halo æ–‡ç« å°é¢ã€‚

### 3. æ–‡ç« ç®¡ç†

åœ¨ **æ–‡ç« ç®¡ç†** æ ‡ç­¾é¡µï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å·²å»ºç«‹å…³è”çš„æ–‡ç« ï¼š
- **â™»ï¸ æ›´æ–°**ï¼šæœ¬åœ°ä¿®æ”¹ç¬”è®°åï¼Œç‚¹å‡»æ›´æ–°å¯å°†å˜åŠ¨åŒæ­¥è‡³ Haloã€‚
- **ğŸ”—æŸ¥çœ‹**ï¼šç›´æ¥æ‰“å¼€æµè§ˆå™¨è®¿é—®åšå®¢æ–‡ç« ã€‚
- **ğŸ—‘ï¸ åˆ é™¤**

### 4. æ•°æ®å¤‡ä»½ä¸è¿ç§»

ä¸ºé˜²æ­¢æ•°æ®ä¸¢å¤±æˆ–æ–¹ä¾¿å¤šè®¾å¤‡ä½¿ç”¨ï¼Œæ’ä»¶æä¾›äº†å®Œå–„çš„æ•°æ®ç®¡ç†åŠŸèƒ½ï¼ˆä½äº **é€šç”¨è®¾ç½®** åº•éƒ¨ï¼‰ï¼š

- **å¯¼å‡ºæ•°æ®**ï¼šç”ŸæˆåŒ…å«æ‰€æœ‰é…ç½®ã€å‘å¸ƒè®°å½•ï¼ˆSiyuan ID â†” Halo ID æ˜ å°„ï¼‰å’Œå›¾ç‰‡ç¼“å­˜çš„ JSON å¤‡ä»½æ–‡ä»¶ã€‚
- **å¯¼å…¥æ•°æ®**ï¼šæ¢å¤ä¹‹å‰çš„å¤‡ä»½ï¼ˆæ³¨æ„ï¼šå¯¼å…¥æ“ä½œä¼šè¦†ç›–å½“å‰çš„é…ç½®ï¼Œä¸”ç½‘ç«™ URL å’Œ Cookie ä¸ä¼šè¢«å¯¼å…¥ï¼Œéœ€è¦é‡æ–°ç™»å½•ï¼‰ã€‚
- **æ¸…é™¤æ•°æ®**ï¼šå½»åº•é‡ç½®æ’ä»¶ï¼Œæ¸…é™¤æ‰€æœ‰æœ¬åœ°å­˜å‚¨çš„é…ç½®å’Œç¼“å­˜ã€‚

---

## ğŸ› ï¸ å¼€å‘è€…æŒ‡å—

æœ¬æŒ‡å—é¢å‘å¸Œæœ›å¯¹æ’ä»¶è¿›è¡ŒäºŒæ¬¡å¼€å‘æˆ–å®šåˆ¶çš„é«˜çº§ç”¨æˆ·ã€‚

### æŠ€æœ¯æ¶æ„

é¡¹ç›®åŸºäº **Vue 3 + TypeScript + Vite** æ„å»ºï¼Œé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œç¡®ä¿äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ä¸æ‰©å±•æ€§ã€‚

| æ¨¡å— | è·¯å¾„ | èŒè´£è¯´æ˜ |
|------|------|----------|
| **UI Presentation** | `src/App.vue` | åŸºäº Composition API çš„å“åº”å¼ç•Œé¢ï¼Œè´Ÿè´£ç”¨æˆ·äº¤äº’ä¸çŠ¶æ€å±•ç¤ºã€‚ |
| **Adaptor Layer** | `src/adaptors/` | æ ¸å¿ƒé€‚é…å±‚ã€‚`HalowebWebAdaptor` å°è£…äº† Halo 2.0 Open API çš„æ‰€æœ‰è°ƒç”¨ç»†èŠ‚ï¼Œå®ç°äº†ä¸šåŠ¡é€»è¾‘ä¸åº•å±‚ API çš„è§£è€¦ã€‚ |
| **Core API** | `src/api/` | åŸºç¡€èƒ½åŠ›å±‚ã€‚`BaseExtendApi` å¤„ç†åº•å±‚ HTTP è¯·æ±‚ä»£ç†ã€å›¾ç‰‡é˜Ÿåˆ—ä¸Šä¼ åŠé”™è¯¯é‡è¯•æœºåˆ¶ã€‚ |
| **State Management** | `src/utils/*Store.ts` | æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨ã€‚åŒ…å«å‘å¸ƒè®°å½• (`PublishStore`) å’Œå›¾ç‰‡ç¼“å­˜ (`ImageCacheStore`) çš„ç®¡ç†ï¼Œå®ç°äº†æ•°æ®åœ¨æ€æºç«¯çš„è½åœ°ã€‚ |

### å¼€å‘ç¯å¢ƒæ­å»º

**å‰ç½®è¦æ±‚**ï¼š
- Node.js 16+
- pnpm

**æ­¥éª¤**ï¼š
1. å…‹éš†ä»“åº“ï¼š
   ```bash
   git clone https://github.com/YourRepo/siyuan-plugin-halo-publisher.git
   ```
2. å®‰è£…ä¾èµ–ï¼š
   ```bash
   pnpm install
   ```
3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š
   ```bash
   pnpm run dev
   ```
   *æ³¨ï¼šå¼€å‘æ¨¡å¼ä¸‹éœ€æ‰‹åŠ¨å°† `dist` ç›®å½•é“¾æ¥åˆ°æ€æºæ’ä»¶ç›®å½•ã€‚*

4. ç”Ÿäº§æ„å»ºï¼š
   ```bash
   pnpm run build
   ```

### è°ƒè¯•å»ºè®®
- **UI è°ƒè¯•**ï¼šæ’ä»¶ UI æœ¬è´¨æ˜¯ WebViewï¼Œå¯åœ¨æ€æºç¬”è®°ä¸­é€šè¿‡å³é”® -> "Inspect" æ‰“å¼€å¼€å‘è€…å·¥å…·è°ƒè¯• Vue ç»„ä»¶ã€‚
- **API è°ƒè¯•**ï¼šæŸ¥çœ‹ Console é¢æ¿çš„ `[HaloPublisher]` å‰ç¼€æ—¥å¿—ï¼Œå¯è¿½è¸ªè¯¦ç»†çš„è¯·æ±‚å‚æ•°ä¸å“åº”ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](https://github.com/Sundaydream/siyuan-plugin-halo-publisher/blob/main/LICENSE) å¼€æºã€‚æ¬¢è¿æäº¤ Pull Request æˆ– Issue å‚ä¸è´¡çŒ®ã€‚